<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>
<header th:fragment="header" class="bg-gradient-to-r from-blue-900 via-blue-700 to-blue-800 text-white shadow-lg pb-36">    <div class="container mx-auto px-4">
        <nav class="flex flex-wrap items-center justify-between py-4">
            <!-- Logo -->
            <div class="flex items-center">
                <a href="/" class="flex items-center space-x-2 text-2xl font-bold hover:text-blue-200 transition-colors duration-300" aria-label="Home">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.618 5.984A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016zM12 9v3m0 0v3m0-3h3m-3 0H9"/>
                    </svg>
                    <span>Anti-Corruption Platform</span>
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button"
                    class="lg:hidden rounded-lg p-2 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300"
                    aria-expanded="false"
                    aria-controls="navigation-links"
                    aria-label="Toggle navigation menu">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-16 6h16"/>
                </svg>
            </button>

            <!-- Navigation Links -->
            <div id="navigation-links" class="hidden w-full lg:flex lg:w-auto lg:items-center" role="navigation">
                <ul class="flex flex-col lg:flex-row lg:space-x-6 space-y-2 lg:space-y-0 mt-4 lg:mt-0">
                    <!-- Resources Dropdown -->
                    <li class="group relative">
                        <button class="nav-dropdown-button flex items-center space-x-1 text-lg font-semibold hover:text-blue-200 w-full lg:w-auto"
                                aria-expanded="true"
                                aria-haspopup="false">
                            <span>Resources</span>
                            <svg class="h-4 w-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <ul class="nav-dropdown-content absolute left-0 w-48 bg-white rounded-lg shadow-lg py-2 mt-2"
                            role="menu">
                            <li><a href="/case-studies" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Case Studies</a></li>
                            <li><a href="/learning-modules" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Learning Modules</a></li>
                            <li><a href="/webinars" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Webinars & Workshops</a></li>
                        </ul>
                    </li>

                    <!-- Get Involved Dropdown -->
                    <li class="group relative">
                        <button class="nav-dropdown-button flex items-center space-x-1 text-lg font-semibold hover:text-blue-200 w-full lg:w-auto"
                                aria-expanded="false"
                                aria-haspopup="true">
                            <span>Get Involved</span>
                            <svg class="h-4 w-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <ul class="nav-dropdown-content absolute left-0 w-48 bg-white rounded-lg shadow-lg py-2 mt-2"
                            role="menu">
                            <li><a href="/forums" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Forums</a></li>
                            <li><a href="/advocacy-alerts" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Advocacy Alerts</a></li>
                            <li><a href="/volunteer-opportunities" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Volunteer Opportunities</a></li>
                        </ul>
                    </li>

                    <!-- Support Dropdown -->
                    <li class="group relative">
                        <button class="nav-dropdown-button flex items-center space-x-1 text-lg font-semibold hover:text-blue-200 w-full lg:w-auto"
                                aria-expanded="false"
                                aria-haspopup="true">
                            <span>Support</span>
                            <svg class="h-4 w-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <ul class="nav-dropdown-content absolute left-0 w-48 bg-white rounded-lg shadow-lg py-2 mt-2"
                            role="menu">
                            <li><a href="/help-center" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Help Center</a></li>
                            <li><a href="/feedback/add" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Feedback</a></li>
                            <li><a href="/alerts" class="block px-4 py-2 text-gray-800 hover:bg-blue-50" role="menuitem">Alerts</a></li>
                        </ul>
                    </li>

                    <!-- Authentication -->
                    <li class="flex space-x-2">
                        <a href="/login" class="px-4 py-2 text-lg font-semibold hover:text-blue-200 transition-colors duration-300">Login</a>
                        <a href="/register" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300">Register</a>
                        <a href="/profile" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300">Profile</a>
                        <a href="/admin-dashboard" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-300">Admin</a>
                        <a href="/logout" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-300">Logout</a>

                    </li>

                </ul>
            </div>
        </nav>
    </div>

    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', function() {
           const mobileMenuButton = document.getElementById('mobile-menu-button');
            const navigationLinks = document.getElementById('navigation-links');
            const dropdownButtons = document.querySelectorAll('.nav-dropdown-button');
            let activeDropdown = null;

            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', function() {
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                navigationLinks.classList.toggle('hidden');
            });

            // Dropdown functionality
            dropdownButtons.forEach(button => {
                const dropdown = button.nextElementSibling;
                closeDropdown(dropdown);

                // Click handler
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';

                    // Close other dropdowns
                    if (activeDropdown && activeDropdown !== dropdown) {
                        closeDropdown(activeDropdown);
                    }

                    if (isExpanded) {
                        closeDropdown(dropdown);
                        activeDropdown = null;
                    } else {
                        openDropdown(dropdown);
                        activeDropdown = dropdown;
                    }

                    button.setAttribute('aria-expanded', !isExpanded);
                    button.querySelector('svg').style.transform = isExpanded ? '' : 'rotate(180deg)';
                });

                // Keyboard navigation
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        button.click();
                    }
                });
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', () => {
                if (activeDropdown) {
                    closeDropdown(activeDropdown);
                    activeDropdown = null;
                }
            });

            // Helper functions
            function openDropdown(dropdown) {
                dropdown.classList.remove('hidden');
                setTimeout(() => dropdown.classList.add('active'), 10);
            }

            function closeDropdown(dropdown) {
                dropdown.classList.remove('active');
                setTimeout(() => dropdown.classList.add('hidden'), 200);
                const button = dropdown.previousElementSibling;
                button.setAttribute('aria-expanded', 'false');
                button.querySelector('svg').style.transform = '';
            }

            // Handle escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && activeDropdown) {
                    closeDropdown(activeDropdown);
                    activeDropdown = null;
                }
            });
        });
    </script>
</header>
</body>
</html>